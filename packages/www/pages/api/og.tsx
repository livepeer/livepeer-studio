import { ImageResponse } from "@vercel/og";

export const config = {
  runtime: "edge",
};

const font = fetch(
  "https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuI6fMZs.woff"
).then((res) => res.arrayBuffer());

export default async function handler() {
  try {
    const fontData = await font;
    return new ImageResponse(
      (
        <div
          style={{
            height: "100%",
            width: "100%",
            display: "flex",
            flexDirection: "column",
            alignItems: "center",
            justifyContent: "center",
            backgroundColor: "#141716",
            fontFamily: "Inter",
            fontSize: "60px",
            lineHeight: "80px",
            fontWeight: 400,
            color: "#99a29e",
          }}>
          <svg
            width="635"
            height="207"
            viewBox="0 0 635 207"
            fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M22.9838 0.749997H0.753828V95H68.2238V75.37H22.9838V0.749997ZM98.9018 0.749997H76.6718V95H98.9018V0.749997ZM106.67 0.749997L138.39 95H164.39L196.37 0.749997H173.75L152.04 70.04L130.33 0.749997H106.67ZM204.133 95H276.413V75.37H226.363V56.39H273.683V36.76H226.363V20.25H276.413V0.749997H204.133V95ZM290.334 0.749997V95H312.564V62.37H326.604C351.044 62.37 369.374 56.26 369.374 31.43C369.374 6.73 351.044 0.749997 326.604 0.749997H290.334ZM327.254 19.47C337.654 19.47 345.844 21.55 345.844 31.43C345.844 41.44 337.654 43.65 327.254 43.65H312.564V19.47H327.254ZM378.312 95H450.592V75.37H400.542V56.39H447.862V36.76H400.542V20.25H450.592V0.749997H378.312V95ZM464.514 95H536.794V75.37H486.744V56.39H534.064V36.76H486.744V20.25H536.794V0.749997H464.514V95ZM608.435 95H634.565L611.295 55.87C622.085 51.71 629.755 43.78 629.755 29.87C629.755 6.46999 611.425 0.749997 586.985 0.749997H550.715V95H572.945V59.51H586.985H588.025L608.435 95ZM587.635 19.47C598.165 19.47 606.225 21.42 606.225 30.13C606.225 38.97 598.165 40.79 587.635 40.79H572.945V19.47H587.635ZM121.998 138.05H143.968C140.718 117.25 123.168 109.19 104.708 109.19C86.2476 109.19 65.5776 118.16 65.5776 137.4C65.5776 154.3 79.4876 161.58 94.8276 164.83L106.268 167.17C116.538 169.38 123.818 172.37 123.818 178.48C123.818 186.28 115.238 188.75 107.698 188.75C96.1276 188.75 88.3276 184.2 85.8576 174.32H63.7576C67.1376 194.6 82.9976 206.69 107.178 206.69C126.808 206.69 146.698 195.51 146.698 175.75C146.698 155.99 127.458 151.31 112.248 148.19L99.3776 145.59C92.8776 144.16 88.4576 140.78 88.4576 136.1C88.4576 130.25 94.8276 127 103.408 127C112.898 127 119.788 131.03 121.998 138.05ZM177.041 205H199.401V130.25H229.691V110.75H146.881V130.25H177.041V205ZM237.421 110.75V164.7C237.421 195.77 250.161 206.69 278.371 206.69C307.751 206.69 318.931 192.91 318.931 163.92V110.75H296.701V165.74C296.701 179.65 293.971 188.49 278.371 188.49C262.901 188.49 259.651 180.82 259.651 167.04V110.75H237.421ZM397.237 157.81C397.237 182.77 382.417 186.28 366.037 186.28H356.807V129.47H366.037C382.417 129.47 397.237 132.98 397.237 157.81ZM334.577 110.75V205H365.647C396.457 205 420.767 193.82 420.767 157.81C420.767 121.93 396.457 110.75 365.647 110.75H334.577ZM454.307 110.75H432.077V205H454.307V110.75ZM489.116 157.94C489.116 137.92 500.686 127.52 514.466 127.52C528.246 127.52 539.816 137.92 539.816 157.94C539.816 177.96 528.246 188.36 514.466 188.36C500.686 188.36 489.116 177.96 489.116 157.94ZM563.346 157.94C563.346 128.56 543.326 109.19 514.466 109.19C485.476 109.19 465.586 128.56 465.586 157.94C465.586 187.32 485.476 206.69 514.466 206.69C543.326 206.69 563.346 187.32 563.346 157.94Z"
              fill="white"
            />
          </svg>

          <div
            style={{
              marginTop: 60,
              paddingLeft: 250,
              paddingRight: 250,
              textAlign: "center",
            }}>
            Your home for building onchain video experiences with Livepeer, the
            worldâ€™s open video infrastructure.
          </div>
        </div>
      ),
      {
        width: 1920,
        height: 1080,
        fonts: [
          {
            name: "Inter",
            data: fontData,
            style: "normal",
          },
        ],
      }
    );
  } catch (e) {
    console.log(`${e.message}`);
    return new Response(`Failed to generate the image`, {
      status: 500,
    });
  }
}
